{% extends 'schoolPages/dashboard_layout.html' %}
{% load static %}

{% block schoolName %}
<li class="nav-item">
    <span class="nav-link mt-2 text-uppercase text-success">{{school}} Primary School</span>
</li>
{% endblock %}

{% block body %}

<div class="row">
  <div class="col-md-6"> 
    <div class="card bg-white text-black shadow md-4 d-flex flex-column justify-content-center align-items-center">
      <h5 class="text-center">Math Students' Performance at {{school}} School</h5> <br>
      <canvas id="myChart" width="400" height="150"></canvas>

      <script>
        $(document).ready(function(){
            var ctx = document.getElementById('myChart').getContext('2d');
            let total_math_student = {{total_math_student}};
      var myChart = new Chart(ctx, {
      type: 'pie',
      data: {
        // labels: [{% for school in qs %}'{{ school.sector }}',{% endfor %}],
        labels: ['Math marks with 0-25 ', 'Math marks with 26-50 ', 'Math marks with 51-75', 'Math marks with 76-100'],
        datasets: [{
            label: '# of Students with the following range of marks',
            data: [(({{count_math_25}}*100)/(total_math_student-2)).toFixed(1), (({{count_math_50}}*100)/(total_math_student-2)).toFixed(1), (({{count_math_75}}*100)/(total_math_student-2)).toFixed(1), (({{count_math_100}}*100)/(total_math_student-2)).toFixed(1)],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 206, 86, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 206, 86, 1)',
            ],
            borderWidth: 1
        }]
      },
      options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        },
        plugins: {
          datalabels: {
            color: '#000',
            {% comment %} anchor: 'end',
            align: 'start', {% endcomment %}
            offset: -10,
            {% comment %} borderWidth: 2,
            borderColor: '#808080',
            borderRadius: 50, {% endcomment %}
            {% comment %} backgroundColor: (context) => {
              return context.dataset.backgroundColor;
            }, {% endcomment %}
            font: {
              weight: 'bold',
              size: '10'
            },
            formatter: (value) => {
              return value + '%';
            }
          }
        }
      }
      });
        }); 
      </script>

    </div>
  </div>

  <div class="col-md-6">
    <div class="card bg-white text-black shadow md-4 d-flex flex-column justify-content-center align-items-center">
      <h5 class="text-center">English Students' Performance at {{school}} School</h5> <br>
      <canvas id="myChartengl" width="400" height="150"></canvas>

      <script>
        $(document).ready(function(){
            var ctx = document.getElementById('myChartengl').getContext('2d');
            let total_engl_student = {{total_engl_student}};
      var myChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        // labels: [{% for school in qs %}'{{ school.sector }}',{% endfor %}],
        labels: ['English marks with 0-25 ', 'English marks with 26-50 ', 'English marks with 51-75', 'English marks with 76-100'],
        datasets: [{
            label: '# of Students with the following range of marks in English Course',
            data: [(({{count_engl_25}}*100)/(total_engl_student)).toFixed(1), (({{count_engl_50}}*100)/(total_engl_student)).toFixed(1), (({{count_engl_75}}*100)/(total_engl_student)).toFixed(1), (({{count_engl_100}}*100)/(total_engl_student)).toFixed(1)],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 206, 86, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 206, 86, 1)',
            ],
            borderWidth: 1
        }]
      },
      options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        },
        plugins: {
          datalabels: {
            color: '#000',
            {% comment %} anchor: 'end',
            align: 'start', {% endcomment %}
            offset: -10,
            {% comment %} borderWidth: 2,
            borderColor: '#808080',
            borderRadius: 50, {% endcomment %}
            {% comment %} backgroundColor: (context) => {
              return context.dataset.backgroundColor;
            }, {% endcomment %}
            font: {
              weight: 'bold',
              size: '10'
            },
            formatter: (value) => {
              return value + '%';
            }
          }
        }
      }
      });
        }); 
      </script>
    </div>
  </div>
</div>
<br>
<div class="row">
  <div class="col-md-6">
    <div class="card bg-white text-black shadow md-4 d-flex flex-column justify-content-center align-items-center">
      <h5 class="text-center">Social Studies students' Performance in {{school}} School</h5> <br>
      <canvas id="myChartsocial" width="400" height="150"></canvas>

      <script>
        $(document).ready(function(){
            var ctx = document.getElementById('myChartsocial').getContext('2d');
            let total_social_student = {{total_social_student}};

      var myChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        // labels: [{% for school in qs %}'{{ school.sector }}',{% endfor %}],
        labels: ['Social Studies marks with 0-25 ', 'Social Studies marks with 26-50 ', 'Social Studies marks with 51-75', 'Social Studies marks with 76-100'],
        datasets: [{
            label: '# of Students with the following range of marks in English Course',
            data: [(({{count_social_25}} * 100)/(total_social_student-1)).toFixed(1), (({{count_social_50}}*100)/(total_social_student-1)).toFixed(1), (({{count_social_75}} * 100)/(total_social_student-1)).toFixed(1), (({{count_social_100}} * 100)/(total_social_student-1)).toFixed(1)],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 206, 86, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 206, 86, 1)',
            ],
            borderWidth: 1
        }]
      },
      options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        },
        plugins: {
          datalabels: {
            color: '#000',
            {% comment %} anchor: 'end',
            align: 'start', {% endcomment %}
            offset: -10,
            {% comment %} borderWidth: 2, 
            borderColor: '#808080',
            borderRadius: 50,
            backgroundColor: (context) => {
              return context.dataset.backgroundColor;
            }, {% endcomment %}
            font: {
              weight: 'bold',
              size: '10'
            },
            formatter: (value) => {
              return value + '%';
            }
          }
        }
      }
      });
        }); 
      </script>

    </div>
  </div>
  <div class="col-md-6">
    <div class="card bg-white text-black shadow md-4 d-flex flex-column justify-content-center align-items-center">
      <h5 class="text-center">Kinyarwanda students' Performance at {{school}} School</h5> <br>
      <canvas id="myChartkiny" width="400" height="150"></canvas>

      <script>
        $(document).ready(function(){
            var ctx = document.getElementById('myChartkiny').getContext('2d');
            let total_kiny_student = {{total_kiny_student}}; 
      var myChart = new Chart(ctx, {
      type: 'line',
      data: {
        // labels: [{% for school in qs %}'{{ school.sector }}',{% endfor %}],
        labels: ['Kinyarwanda marks with 0-25 ', 'Kinyarwanda marks with 26-50 ', 'Kinyarwanda marks with 51-75', 'Kinyarwanda marks with 76-100'],
        datasets: [{
            label: '# of Students with the following range of marks in Kinyarwanda Course',
            data: [(({{count_kiny_25}}*100)/total_kiny_student).toFixed(1), (({{count_kiny_50}}*100)/total_kiny_student).toFixed(1), (({{count_kiny_75}}*100)/total_kiny_student).toFixed(1), (({{count_kiny_100}}*100)/total_kiny_student).toFixed(1)],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                
            ],
            borderWidth: 1
        }]
      },
      options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        },
        plugins: {
          datalabels: {
            color: '#000',
            {% comment %} anchor: 'end',
            align: 'start', {% endcomment %}
            offset: -10,
            {% comment %} borderWidth: 2,
            borderColor: '#808080',
            borderRadius: 50, {% endcomment %}
            {% comment %} backgroundColor: (context) => {
              return context.dataset.backgroundColor;
            }, {% endcomment %}
            font: {
              weight: 'bold',
              size: '10'
            },
            formatter: (value) => {
              return value + '%';
            }
          }
        }
      }
      });
        }); 
      </script> 
    </div>
  </div>
</div>
<br>
<div class="row">
  <div class="col-md-6">
    <div class="card bg-white text-black shadow md-4 d-flex flex-column justify-content-center align-items-center">
      <h5 class="text-center">SET Students' Performance at {{school}} School</h5> <br>
      <canvas id="myChartset" width="400" height="150"></canvas>

      <script>
        $(document).ready(function(){
            var ctx = document.getElementById('myChartset').getContext('2d');
            let total_est_student = {{total_est_student}};
    var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        // labels: [{% for school in qs %}'{{ school.sector }}',{% endfor %}],
        labels: ['SET marks with 0-25 ', 'SET marks with 26-50 ', 'SET marks with 51-75', 'SET marks with 76-100'],
        datasets: [{
            label: '# of Students with the following range of marks',
            data: [(({{count_est_25 }} * 100 )/total_est_student-2).toFixed(1), (({{count_est_50}} * 100)/total_est_student-2).toFixed(1), (({{count_est_75}} * 100)/total_est_student-2).toFixed(1), (({{count_est_100}} * 100)/total_est_student-2).toFixed(0)],
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              {% comment %} '#FB3640', '#EFCA08', '#43AA8B', '#253D58', {% endcomment %}
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 206, 86, 1)',
          ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        },
        plugins: {
          datalabels: {
            color: '#000',
            {% comment %} anchor: 'end',
            align: 'start', {% endcomment %}
            offset: -10,
            {% comment %} borderWidth: 2,
            borderColor: '#808080',
            borderRadius: 50, {% endcomment %}
            {% comment %} backgroundColor: (context) => {
              return context.dataset.backgroundColor;
            }, {% endcomment %}
            font: {
              weight: 'bold',
              size: '10'
            },
            formatter: (value) => {
              return value + '%';
            }
          }
        }
      }
    });
        }); 
    </script>

    </div>
  </div>
</div>
   
{% endblock %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>
    <script src="{% static 'js/studentFormValidation.js' %}"></script>